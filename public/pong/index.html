<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, minimal-ui" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

  <!-- Mobile fullscreen support -->
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#000000">

  <title>BEAR PONG - Multiplayer</title>

  <!-- BEAR Park Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet" />

  <!-- BEAR Park Authentication - Read URL params and store to localStorage -->
  <script>
    (function () {
      try {
        // Read URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const wallet = urlParams.get('wallet');
        const displayName = urlParams.get('display_name');
        const twitterUsername = urlParams.get('twitter_username');
        const avatarUrl = urlParams.get('avatar_url');

        // Store to localStorage if provided
        if (wallet) {
          localStorage.setItem('xaman_wallet_address', wallet);
        }

        if (displayName) {
          localStorage.setItem('display_name', displayName);
        }

        if (twitterUsername) {
          localStorage.setItem('twitter_username', twitterUsername);
        }

        if (avatarUrl) {
          localStorage.setItem('avatar_url', avatarUrl);
        }

        // Clean URL after reading params (optional - removes params from address bar)
        if (wallet || displayName || twitterUsername || avatarUrl) {
          const cleanUrl = window.location.origin + window.location.pathname;
          window.history.replaceState({}, document.title, cleanUrl);
        }
      } catch (error) {
        console.error('Error reading BEAR Park authentication data:', error);
      }
    })();
  </script>

  <!-- Mobile Fullscreen Trigger -->
  <script>
    (function () {
      // Detect device
      const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent);
      const isAndroid = /Android/.test(navigator.userAgent);

      // Function to enter fullscreen
      function enterFullscreen() {
        if (isIOS) {
          setTimeout(() => { window.scrollTo(0, 1); }, 100);
          return;
        }

        const elem = document.documentElement;
        if (elem.requestFullscreen) {
          elem.requestFullscreen().catch(() => { });
        } else if (elem.webkitRequestFullscreen) {
          elem.webkitRequestFullscreen();
        } else if (elem.webkitEnterFullscreen) {
          elem.webkitEnterFullscreen();
        } else if (elem.mozRequestFullScreen) {
          elem.mozRequestFullScreen();
        } else if (elem.msRequestFullscreen) {
          elem.msRequestFullscreen();
        }
      }

      let fullscreenTriggered = false;

      const triggerFullscreen = (event) => {
        if (fullscreenTriggered) return;
        fullscreenTriggered = true;
        enterFullscreen();
        document.removeEventListener('touchstart', triggerFullscreen);
        document.removeEventListener('click', triggerFullscreen);
        document.removeEventListener('pointerdown', triggerFullscreen);
      };

      document.addEventListener('touchstart', triggerFullscreen);
      document.addEventListener('click', triggerFullscreen);
      document.addEventListener('pointerdown', triggerFullscreen);

      window.enterFullscreen = enterFullscreen;
      window.isIOS = isIOS;
    })();
  </script>

  <!-- ðŸ¯ HONEY POINTS: Load game points helper -->
  <script src="./game-points-helper.js"></script>


  <style>
    html,
    body {
      background: black;
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      overscroll-behavior: none;
    }

    #game-container {
      width: 100%;
      height: 100%;
    }

    /* Let Phaser handle canvas positioning */
    #game-container canvas {
      display: block;
    }
  </style>
  <script type="module" crossorigin src="./assets/index-CV7AQYAL.js"></script>
  <link rel="modulepreload" crossorigin href="./assets/phaser-0YPJO2g1.js">
</head>

<body>
  <div id="game-container"></div>
</body>

</html>